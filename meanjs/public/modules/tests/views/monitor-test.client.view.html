<section data-ng-controller="MonitorTestController" data-ng-init="setup()">
  <div class="page-header">
    <h1>Monitor Tests</h1>
  </div>
  <h3>Devices
    <a class="btn btn-info btn-sm pull-right" href="/#!/tests/review" type="button">Go
      To Review Page</a>
    <button class="btn btn-primary btn-sm pull-right" ng-click="toggleChronjob()"
      type="button">{{updateOn ? 'Turn Off Updating' : 'Turn On Updating'}}</button>
  </h3>
  <div class="list-group col-xs-12">
    <a class="list-group-item" ng-repeat="test in tests">
      <h4 class="list-group-item-heading">{{test._device.name}}
        <span class="badge" class="btn btn-success">{{test.status === 'Cancelled' ? 'Cancelled' : test.percentComplete === 0 ? 'Starting' : test.percentComplete === 100 ? 'Complete' : 'In progress'}}</span>
      </h4>
      <p class="list-group-item-text">
        <small>Started on {{test._cartridge.startedOn | date: "medium"}}</small><br/>
        <small>Status: {{test.status}}</small>
        <br/>
        <br/>
        <p class="col-xs-10">
          <progressbar max="100" type="warning" value="test.percentComplete">
            <span style="color:black; white-space:nowrap;">{{test.percentComplete}}</span>
          </progressbar>
        </p>
        <p class="col-xs-2">
          <button class="btn btn-danger btn-xs pull-right" ng-click="cancelTest($index)"
            type="button">Cancel</button>
        </p>
        <br/>
      </p>
    </a>
  </div>
</section>
