<section data-ng-controller="RunTestController" data-ng-init="setupRun()">
  <div class="page-header">
    <div class="col-xs-12">
      <h1>Run a Brevitestâ„¢</h1>
    </div>
    <div class="col-xs-12">
      <div class="btn-group" role="group">
        <a class="btn btn-default" disabled href="/#!/tests/run">Run</a>
        <a class="btn btn-default" href="/#!/tests/monitor">Monitor</a>
        <a class="btn btn-default" href="/#!/tests/review">Review</a>
      </div>
    </div>
    <div>&nbsp;</div>
  </div>
  <div class="col-xs-12">
    <div><br/></div>
    <div class="col-md-8">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Enter Test Information</h3>
        </div>
        <div class="panel-body">
          <form class="col-xs-12 form-horizontal">
            <fieldset>
              <div class="form-group">
                <label class="control-label" for="reference">Reference</label>
                <div class="controls">
                  <input class="form-control" data-ng-model="reference" id="reference" placeholder="Enter test reference here (required)" required type="text"></input>
                </div>
                <label class="control-label" for="subject">Subject ID</label>
                <div class="controls">
                  <input class="form-control" data-ng-model="subject" id="subject" placeholder="Enter test subject ID here" required type="text"></input>
                </div>
                <label class="control-label" for="description">Description</label>
                <div class="controls">
                  <input class="form-control" data-ng-model="description" id="description" placeholder="Enter test description here" type="text"></input>
                </div>
              </div>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <button class="btn btn-xs btn-default pull-right glyphicon glyphicon-refresh" ng-click="refresh()" type="button"></button>
          <h3 class="panel-title">Available Devices</h3>
        </div>
        <div class="panel-body">
          <div class="col-xs-8 col-xs-offset-2 col-md-10 col-md-offset-1">
            <button class="btn btn-success btn-block" ng-class="{disabled: activeDevice === -1}" ng-click="beginTest()" ng-hide="testUnderway" type="button">Run Test</button>
          </div>
          <div class="list-group" ng-show="devices.length">
            <a class="list-group-item {{activeDevice === $index ? 'active' : ''}}" href="" ng-repeat="device in devices" ng_click="clickDevice($index)">{{device.name}}</a>
          </div>
        </div>
        <div class="col-xs-12 panel panel-warning" ng-show="!devices.length">
          <div class="panel-heading">
            No available devices found in your pool
          </div>
          <div class="panel-body">
            The device you wish to use may not be online, or may be in use on another test. Check to make sure it is plugged in, connected to the network, and not being used.
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
